class_name InputKey
extends InputSource

enum InputKeyContribution {
	UP_OR_POSITIVE,
	DOWN_OR_NEGATIVE,
	LEFT,
	RIGHT
}

enum InputKeyID {
	ESCAPE = 16777217,
	TAB = 16777218,
	BACKTAB = 16777219,
	BACKSPACE = 16777220,
	ENTER = 16777221,
	KP_ENTER = 16777222,
	INSERT = 16777223,
	DELETE = 16777224,
	PAUSE = 16777225,
	PRINT = 16777226,
	SYSREQ = 16777227,
	CLEAR = 16777228,
	HOME = 16777229,
	END = 16777230,
	LEFT = 16777231,
	UP = 16777232,
	RIGHT = 16777233,
	DOWN = 16777234,
	PAGEUP = 16777235,
	PAGEDOWN = 16777236,
	SHIFT = 16777237,
	CONTROL = 16777238,
	META = 16777239,
	ALT = 16777240,
	CAPSLOCK = 16777241,
	NUMLOCK = 16777242,
	SCROLLLOCK = 16777243,
	F1 = 16777244,
	F2 = 16777245,
	F3 = 16777246,
	F4 = 16777247,
	F5 = 16777248,
	F6 = 16777249,
	F7 = 16777250,
	F8 = 16777251,
	F9 = 16777252,
	F10 = 16777253,
	F11 = 16777254,
	F12 = 16777255,
	F13 = 16777256,
	F14 = 16777257,
	F15 = 16777258,
	F16 = 16777259,
	KP_MULTIPLY = 16777345,
	KP_DIVIDE = 16777346,
	KP_SUBTRACT = 16777347,
	KP_PERIOD = 16777348,
	KP_ADD = 16777349,
	KP_0 = 16777350,
	KP_1 = 16777351,
	KP_2 = 16777352,
	KP_3 = 16777353,
	KP_4 = 16777354,
	KP_5 = 16777355,
	KP_6 = 16777356,
	KP_7 = 16777357,
	KP_8 = 16777358,
	KP_9 = 16777359,
	SUPER_L = 16777260,
	SUPER_R = 16777261,
	MENU = 16777262,
	HYPER_L = 16777263,
	HYPER_R = 16777264,
	HELP = 16777265,
	DIRECTION_L = 16777266,
	DIRECTION_R = 16777267,
	BACK = 16777280,
	FORWARD = 16777281,
	STOP = 16777282,
	REFRESH = 16777283,
	VOLUMEDOWN = 16777284,
	VOLUMEMUTE = 16777285,
	VOLUMEUP = 16777286,
	BASSBOOST = 16777287,
	BASSUP = 16777288,
	BASSDOWN = 16777289,
	TREBLEUP = 16777290,
	TREBLEDOWN = 16777291,
	MEDIAPLAY = 16777292,
	MEDIASTOP = 16777293,
	MEDIAPREVIOUS = 16777294,
	MEDIANEXT = 16777295,
	MEDIARECORD = 16777296,
	HOMEPAGE = 16777297,
	FAVORITES = 16777298,
	SEARCH = 16777299,
	STANDBY = 16777300,
	OPENURL = 16777301,
	LAUNCHMAIL = 16777302,
	LAUNCHMEDIA = 16777303,
	LAUNCH0 = 16777304,
	LAUNCH1 = 16777305,
	LAUNCH2 = 16777306,
	LAUNCH3 = 16777307,
	LAUNCH4 = 16777308,
	LAUNCH5 = 16777309,
	LAUNCH6 = 16777310,
	LAUNCH7 = 16777311,
	LAUNCH8 = 16777312,
	LAUNCH9 = 16777313,
	LAUNCHA = 16777314,
	LAUNCHB = 16777315,
	LAUNCHC = 16777316,
	LAUNCHD = 16777317,
	LAUNCHE = 16777318,
	LAUNCHF = 16777319,
	UNKNOWN = 33554431,
	SPACE = 32,
	EXCLAM = 33,
	QUOTEDBL = 34,
	NUMBERSIGN = 35,
	DOLLAR = 36,
	PERCENT = 37,
	AMPERSAND = 38,
	APOSTROPHE = 39,
	PARENLEFT = 40,
	PARENRIGHT = 41,
	ASTERISK = 42,
	PLUS = 43,
	COMMA = 44,
	MINUS = 45,
	PERIOD = 46,
	SLASH = 47,
	NUM_0 = 48,
	NUM_1 = 49,
	NUM_2 = 50,
	NUM_3 = 51,
	NUM_4 = 52,
	NUM_5 = 53,
	NUM_6 = 54,
	NUM_7 = 55,
	NUM_8 = 56,
	NUM_9 = 57,
	COLON = 58,
	SEMICOLON = 59,
	LESS = 60,
	EQUAL = 61,
	GREATER = 62,
	QUESTION = 63,
	AT = 64,
	A = 65,
	B = 66,
	C = 67,
	D = 68,
	E = 69,
	F = 70,
	G = 71,
	H = 72,
	I = 73,
	J = 74,
	K = 75,
	L = 76,
	M = 77,
	N = 78,
	O = 79,
	P = 80,
	Q = 81,
	R = 82,
	S = 83,
	T = 84,
	U = 85,
	V = 86,
	W = 87,
	X = 88,
	Y = 89,
	Z = 90,
	BRACKETLEFT = 91,
	BACKSLASH = 92,
	BRACKETRIGHT = 93,
	ASCIICIRCUM = 94,
	UNDERSCORE = 95,
	QUOTELEFT = 96,
	BRACELEFT = 123,
	BAR = 124,
	BRACERIGHT = 125,
	ASCIITILDE = 126,
	NOBREAKSPACE = 160,
	EXCLAMDOWN = 161,
	CENT = 162,
	STERLING = 163,
	CURRENCY = 164,
	YEN = 165,
	BROKENBAR = 166,
	SECTION = 167,
	DIAERESIS = 168,
	COPYRIGHT = 169,
	ORDFEMININE = 170,
	GUILLEMOTLEFT = 171,
	NOTSIGN = 172,
	HYPHEN = 173,
	REGISTERED = 174,
	MACRON = 175,
	DEGREE = 176,
	PLUSMINUS = 177,
	TWOSUPERIOR = 178,
	THREESUPERIOR = 179,
	ACUTE = 180,
	MU = 181,
	PARAGRAPH = 182,
	PERIODCENTERED = 183,
	CEDILLA = 184,
	ONESUPERIOR = 185,
	MASCULINE = 186,
	GUILLEMOTRIGHT = 187,
	ONEQUARTER = 188,
	ONEHALF = 189,
	THREEQUARTERS = 190,
	QUESTIONDOWN = 191,
	AGRAVE = 192,
	AACUTE = 193,
	ACIRCUMFLEX = 194,
	ATILDE = 195,
	ADIAERESIS = 196,
	ARING = 197,
	AE = 198,
	CCEDILLA = 199,
	EGRAVE = 200,
	EACUTE = 201,
	ECIRCUMFLEX = 202,
	EDIAERESIS = 203,
	IGRAVE = 204,
	IACUTE = 205,
	ICIRCUMFLEX = 206,
	IDIAERESIS = 207,
	ETH = 208,
	NTILDE = 209,
	OGRAVE = 210,
	OACUTE = 211,
	OCIRCUMFLEX = 212,
	OTILDE = 213,
	ODIAERESIS = 214,
	MULTIPLY = 215,
	OOBLIQUE = 216,
	UGRAVE = 217,
	UACUTE = 218,
	UCIRCUMFLEX = 219,
	UDIAERESIS = 220,
	YACUTE = 221,
	THORN = 222,
	SSHARP = 223,
	DIVISION = 247,
	YDIAERESIS = 255
}

export(InputKeyID) var key
export(InputKeyContribution) var contribution
var contribution_float = 1.0
var contribution_vector = Vector2.UP
var controller = 0

func size():
	return InputValueSize.HALF

func _ready():
	match contribution:
		InputKeyContribution.UP_OR_POSITIVE:
			contribution_float = 1.0
			contribution_vector = Vector2.UP
		InputKeyContribution.DOWN_OR_NEGATIVE:
			contribution_float = -1.0
			contribution_vector = Vector2.DOWN
		InputKeyContribution.LEFT:
			contribution_vector = Vector2.LEFT
		InputKeyContribution.RIGHT:
			contribution_vector = Vector2.RIGHT

func raw():
	return Input.is_physical_key_pressed(key)

func bool():
	previous = current
	current = raw()
	down = current && !previous
	up = !current && previous
	changed = down || up

func float():
	previous = current
	current = contribution_float * float(raw())
	changed = current != previous

func vector():
	previous = current
	current = contribution_vector * float(raw())
	changed = current != previous

